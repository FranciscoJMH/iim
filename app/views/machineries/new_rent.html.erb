<section class="container">
  <div class="box">
    <div class="row align-items-center mb-3">
      <div class="col-1">
        <%= link_to machineries_path, class: "btn btn-link" do %>
          <svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="currentColor" class="bi bi-backspace" viewBox="0 0 16 16">
            <path d="M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z"/>
            <path d="M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z"/>
          </svg>
        <% end %>
      </div>
      <div class="col">
        <h1 class="mb-0">Nueva Renta</h1>
      </div>
    </div>
    <%= form_tag(new_machinery_path, method: :get, style: "display: block", class: "m-2") do %>
      <div class="mb-3">
        <%= label_tag :enterprise_id, "Empresa", class: "my-label-class" %>
        <%= collection_select(:machinery, :enterprise_id, Enterprise.all, :id, :name, { prompt: 'Seleccione Empresa'}, { class: 'form-control', id: 'enterprise-select' }) %>
        <span id="selected-enterprise-name"></span>
      </div>
      <%= hidden_field_tag :selected_enterprise_name, '', id: 'selected-enterprise-name-input' %>
      <%= submit_tag "Empezar llenado", class: "btn btn-primary" %>
    <% end %>
  </div>
</section>

<style>
  .container {
    position: relative;
  }
  .container .box {
    padding: 1rem;
    background-color: rgba(227, 227, 227, 0.62);
    border: 1px solid rgba(255, 255, 255, 0.222);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: .7rem;
    transition: all ease .3s;
  }
  .container .box {
    flex-direction: column;
    justify-content: space-between;
    box-shadow: 0px 0px 20px 1px rgba(114, 0, 0, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.454);
  }
  .my-label-class {
  }

  .my-collection-select-class {
  }
</style>

<script>
$(document).ready(function() {
  $('#enterprise-select').on('change', function() {
    var selectedEnterpriseName = $(this).find(':selected').text();
    $('#selected-enterprise-name').text(selectedEnterpriseName);
    $('#selected-enterprise-name-input').val(selectedEnterpriseName); // Actualizar el campo oculto
  });
});
</script>